(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(34)},31:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(17),c=a.n(s),i=a(2),o=a(3),l=a(5),u=a(4),d=a(6),h=a(35),m=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleConnection=function(e){a.props.handleConnection(e)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(h.a,{to:{pathname:"/login",handleConnection:this.handleConnection},id:"login",className:"waves-effect waves-light btn-large"},"Login"),r.a.createElement(h.a,{to:"/signup",id:"singup",className:"waves-effect waves-light btn-large purple accent-4"},"Sign Up"))}}]),t}(n.Component),p=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleConnection=function(){a.props.handleConnection({success:!1})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(h.a,{to:"/",onClick:this.handleConnection,id:"singout",className:"waves-effect waves-light btn-large purple accent-4"},"Sign Out"))}}]),t}(n.Component),v=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isConnected:!1},a.handleConnection=function(e){a.setState({isConnected:e.success})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.isConnected?r.a.createElement(p,{handleConnection:this.handleConnection}):r.a.createElement(m,{handleConnection:this.handleConnection});return r.a.createElement("div",{className:"App-header"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"header-panel"},r.a.createElement(h.a,{to:"/",id:"titleHomeLink"},"Events Search App"),r.a.createElement("div",{className:"buttons-panel"},e)),r.a.createElement("div",{className:"divider"})))}}]),t}(n.Component),f=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"search-wrapper center"},r.a.createElement("div",{className:"search-box"},r.a.createElement("input",{type:"text",placeholder:"search for events...",id:"search",onChange:function(t){e.props.onChangeTextFilter(t.target.value,"text")}}),r.a.createElement("i",{className:"material-icons"},"search"))))}}]),t}(n.Component),g=function(){return new Promise(function(e,t){navigator.geolocation.getCurrentPosition(e,t)})},E=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={valueType:"",valueLocation:"0.5"},a.changeType=function(e){a.setState({valueType:e.target.value}),a.props.handleSelectChange(e.target.value)},a.changeLoc=function(e){a.setState({valueLocation:e.target.value})},a.handleLocSubmit=function(e){e.preventDefault(),g().then(function(e){var t=e.coords,n=[t.latitude,t.longitude,a.state.valueLocation];a.props.handleSelectChange(n)}).catch(function(e){console.log(e)})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.selectedOption,t=this.props[this.props.selectedOption];if("location"!==e){var a=t.map(function(e){return r.a.createElement("option",{key:"".concat(e)},e)});return r.a.createElement("div",{className:"input-field col s6"},r.a.createElement("select",{name:"events",onChange:this.changeType,value:this.state.valueType},a))}return r.a.createElement("div",{className:"input-field col s6"},r.a.createElement("p",null,"Events near by your position: "),r.a.createElement("form",{onSubmit:this.handleLocSubmit},r.a.createElement("select",{name:"events",onChange:this.changeLoc,value:this.state.valueLocation},r.a.createElement("option",{value:"0.5"},"500m"),r.a.createElement("option",{value:"1"},"1km"),r.a.createElement("option",{value:"5"},"5km"),r.a.createElement("option",{value:"10"},"10km"),r.a.createElement("option",{value:"15"},"15km")),r.a.createElement("input",{type:"submit",value:"submit",className:"btn teal waves-effect waves-light",id:"locationSubmit"})))}}]),t}(n.Component),b=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selectedOption:""},a.handleOptionChange=function(e){a.setState({selectedOption:e.target.value})},a.handleSelectChange=function(e){a.props.handleSelectChange(e,a.state.selectedOption)},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.dates,n=t.types,s=["By date","By type of event","By location"],c=["date","type","location"].map(function(t,a){return r.a.createElement("p",{key:a},r.a.createElement("label",null,r.a.createElement("input",{name:"group1",type:"radio",value:t,onChange:e.handleOptionChange}),r.a.createElement("span",null,s[a])))}),i=null;return this.state.selectedOption&&(i=r.a.createElement(E,{selectedOption:this.state.selectedOption,date:a,type:n,handleSelectChange:this.handleSelectChange})),r.a.createElement("div",{className:"filter_options container"},r.a.createElement("p",null,"or use advanced filters instead: "),r.a.createElement("form",{action:"#",className:"advanced_filters_form"},c),i)}}]),t}(n.Component),y=a(10),w=a.n(y),O=a(12),j=a(15),C=null,N=null,S=function(e){var t=new Set,a=new Set;e.forEach(function(e){e.type=e.type.replace(/,*$/,""),t.add(e.type),a.add(e.date)}),C=Object(j.a)(t),N=Object(j.a)(a)},k=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={events:[],isLoading:!0},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),function(){var t=Object(O.a)(w.a.mark(function t(){var a,n;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:8080/evenement/tous");case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,e.setState({events:n,isLoading:!1}),S(n),e.props.handleSelectedTypes(C,N);case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()()}},{key:"componentWillReceiveProps",value:function(e){var t=this;if("location"===e.filter){var a=e.search,n=a[0],r=a[1],s=a[2];fetch("http://localhost:8080/eventsByLocation",{method:"POST",headers:new Headers,body:JSON.stringify({latitude:n,longitude:r,radius:s})}).then(function(e){return e.json()}).then(function(e){console.log(e),t.setState({events:e})}).catch(function(e){return console.log(e)})}}},{key:"render",value:function(){var e,t,a=this.state,n=a.events,s=a.isLoading,c=this.props,i=c.filter,o=c.search;if(s)return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"indeterminate"})),r.a.createElement("p",null,"Loading..."));"text"===i?e=n.filter(function(e){return-1!==e.nom.toLowerCase().indexOf(o.toLowerCase())}):"location"===i?e=n:(t="date"===i?"date":"type",e=n.filter(function(e){return-1!==e[t].indexOf(o)}));var l=e.map(function(t){return e.length>0?r.a.createElement("div",{key:t.recordid,className:"card hoverable event"},r.a.createElement("div",{className:"card-image"},r.a.createElement("div",{className:"event-img",style:{backgroundImage:"url(".concat(t.media_1,")")}}),r.a.createElement("span",{className:"card-title"},t.nom)),r.a.createElement("div",{className:"card-content"},"".concat(t.description.substring(0,150),"... ")),r.a.createElement(h.a,{to:{pathname:"/events/"+t.recordid,state:{event:t}},className:"waves-effect waves-light btn-small deep-purple accent-2"},"See more")):null});return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"EventsList"},l))}}]),t}(n.Component),x=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={filter:"",eventsTypes:[],eventsDates:[],search:[]},a.handleSelectedTypes=function(e,t){a.setState(function(){return{eventsTypes:e,eventsDates:t}})},a.handleSelectChange=function(e,t){a.setState({search:e,filter:t})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(f,{onChangeTextFilter:this.handleSelectChange}),r.a.createElement(b,{types:this.state.eventsTypes,dates:this.state.eventsDates,handleSelectChange:this.handleSelectChange,loadEventsLoc:this.loadEventsLoc}),r.a.createElement(k,{search:this.state.search,handleSelectedTypes:this.handleSelectedTypes,filter:this.state.filter}))}}]),t}(n.Component),V=a(13),L=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={userid:"",password:"",formErrors:{userid:"",password:""},useridValid:!1,passwordValid:!1,formValid:!1},a.handleChange=function(e){var t=e.target.id,n=e.target.value;a.setState(Object(V.a)({},t,n),function(){a.validateField(t,n)})},a.handleReset=function(){a.setState({userid:"",password:""})},a.handleSubmit=function(e){e.preventDefault();var t=document.getElementById("userid").value,n=document.getElementById("password").value;fetch("http://localhost:8080/connexion",{method:"POST",headers:new Headers,body:JSON.stringify({login:t,password:n})}).then(function(e){return e.json()}).then(function(e){console.log(e),a.props.location.handleConnection(e)}).catch(function(e){return console.log(e)}).then(function(){a.props.history.push("/")})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"validateField",value:function(e,t){var a=this.state,n=a.formErrors,r=a.useridValid,s=a.passwordValid;switch(e){case"userid":r=t.length>=4,n.userid=r?"":"login is too short";break;case"password":s=t.length>=6,n.password=s?"":"password is too short"}this.setState({formErrors:n,useridValid:r,passwordValid:s},this.validateForm)}},{key:"validateForm",value:function(){this.setState({formValid:this.state.useridValid&&this.state.passwordValid})}},{key:"render",value:function(){return r.a.createElement("div",{className:"section section-login"},r.a.createElement("div",{className:"valign-wrapper row login-box"},r.a.createElement("div",{className:"col card hoverable s10 pull-s1 m6 pull-m3 l4 pull-l4"},r.a.createElement("form",{action:"/",method:"POST",id:"loginForm",onSubmit:this.handleSubmit,autocomplete:"off"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},"Enter login details"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("span",null,this.state.formErrors.userid),r.a.createElement("input",{type:"text",value:this.state.loginInput,onChange:this.handleChange,className:"validate\n                 ".concat(this.state.formErrors.userid?"invalid":""),name:"uid",id:"userid",placeholder:"login"})),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("span",null,this.state.formErrors.password),r.a.createElement("input",{type:"password",value:this.state.passInput,onChange:this.handleChange,className:"validate\n                 ".concat(this.state.formErrors.password?"invalid":""),name:"pwd",id:"password",placeholder:"password"})))),r.a.createElement("div",{className:"card-action right-align"},r.a.createElement("input",{type:"reset",id:"reset",className:"btn-flat grey-text waves-effect",onClick:this.handleReset}),r.a.createElement("input",{type:"submit",disabled:!this.state.formValid,className:"btn teal waves-effect waves-light",value:"Enter as user"}))))))}}]),t}(n.Component),T=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={userid:"",password:"",formErrors:{userid:"",password:""},useridValid:!1,passwordValid:!1,formValid:!1},a.handleChange=function(e){var t=e.target.id,n=e.target.value;a.setState(Object(V.a)({},t,n),function(){a.validateField(t,n)})},a.handleReset=function(){a.setState({userid:"",password:""})},a.handleSubmit=function(e){e.preventDefault();var t=document.getElementById("userid").value,n=document.getElementById("password").value;fetch("http://localhost:8080/inscription",{method:"POST",headers:new Headers,body:JSON.stringify({login:t,password:n})}).then(function(e){return e.json()}).then(function(e){console.log(e),a.props.location.handleConnection(e)}).catch(function(e){return console.log(e)}).then(function(){a.props.history.push("/")})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"validateField",value:function(e,t){var a=this.state,n=a.formErrors,r=a.useridValid,s=a.passwordValid;switch(e){case"userid":r=t.length>=4,n.userid=r?"":"login is too short";break;case"password":s=t.length>=6,n.password=s?"":"password is too short"}this.setState({formErrors:n,useridValid:r,passwordValid:s},this.validateForm)}},{key:"validateForm",value:function(){this.setState({formValid:this.state.useridValid&&this.state.passwordValid})}},{key:"render",value:function(){return r.a.createElement("div",{className:"section section-login"},r.a.createElement("div",{className:"valign-wrapper row login-box"},r.a.createElement("div",{className:"col card hoverable s10 pull-s1 m6 pull-m3 l4 pull-l4"},r.a.createElement("form",{action:"/",method:"POST",id:"signupForm",onSubmit:this.handleSubmit,autocomplete:"off"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},"Welcome! Here you can create a new account"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("span",null,this.state.formErrors.userid),r.a.createElement("input",{type:"text",value:this.state.loginInput,onChange:this.handleChange,className:"validate\n                 ".concat(this.state.formErrors.userid?"invalid":""),name:"uid",id:"userid",placeholder:"login"})),r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("span",null,this.state.formErrors.password),r.a.createElement("input",{type:"password",value:this.state.passInput,onChange:this.handleChange,className:"validate\n                 ".concat(this.state.formErrors.password?"invalid":""),name:"pwd",id:"password",placeholder:"password"})))),r.a.createElement("div",{className:"card-action right-align"},r.a.createElement("input",{type:"reset",id:"reset",className:"btn-flat grey-text waves-effect",onClick:this.handleReset}),r.a.createElement("input",{type:"submit",disabled:!this.state.formValid,className:"btn teal waves-effect waves-light",value:"Create account"}))))))}}]),t}(n.Component),A=function(){var e=Object(O.a)(w.a.mark(function e(t){var a,n;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/evenement/".concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),F=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={event:{}},e.location.state&&(a.state={event:e.location.state.event}),a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;A(this.props.match.params.event_id).then(function(t){return e.setState({event:t})})}},{key:"render",value:function(){var e=this.state.event;return r.a.createElement("div",{className:"container"},r.a.createElement("h5",null,"Event Data"),r.a.createElement("p",null,e.nom),r.a.createElement("img",{src:e.media_1,alt:"some text"}))}}]),t}(n.Component),B=(a(29),a(31),a(37)),I=a(36),D=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(B.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(v,null),r.a.createElement(I.a,{exact:!0,path:"/",component:x}),r.a.createElement(I.a,{exact:!0,path:"/login",component:L}),r.a.createElement(I.a,{exact:!0,path:"/signup",component:T}),r.a.createElement(I.a,{path:"/events/:event_id",component:F})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,2,1]]]);
//# sourceMappingURL=main.3d2a1c5d.chunk.js.map